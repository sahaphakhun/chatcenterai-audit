# Frontend Audit (Dashboard + Instruction Editors)

‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö: 2025-12-12 (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç: 2025-12-13)

‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏™‡∏£‡∏∏‡∏õ ‚Äú‡∏ö‡∏±‡∏Ñ‡∏ù‡∏±‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö (frontend)‚Äù, ‚Äú‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏•‡∏≥‡∏ö‡∏≤‡∏Å/‡∏™‡∏±‡∏ö‡∏™‡∏ô‚Äù, ‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏ù‡∏±‡πà‡∏á‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î (static review) ‡∏Ç‡∏≠‡∏á‡πÑ‡∏ü‡∏•‡πå `views/` + `public/js/` + `public/css/` ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ

> ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ô UI ‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå (‡πÑ‡∏°‡πà‡∏°‡∏µ manual QA) ‡∏à‡∏∂‡∏á‡πÄ‡∏ô‡πâ‡∏ô‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà ‚Äú‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏û‡∏±‡∏á‡∏à‡∏£‡∏¥‡∏á/‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á‚Äù ‡πÅ‡∏•‡∏∞ ‚Äú‡∏ô‡πà‡∏≤‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡∏¥‡∏î‡∏Ç‡∏±‡∏î‚Äù ‡∏à‡∏≤‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å

## ‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à

‡πÄ‡∏°‡∏ô‡∏π/‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å‡∏ù‡∏±‡πà‡∏á‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á:

- ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Instructions (V2): `views/admin-dashboard-v2.ejs`, `public/js/admin-dashboard-v2.js`
- ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∏‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Text/Table ‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÄ‡∏î‡∏¥‡∏°): `views/edit-data-item-v2.ejs`
- ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∏‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Table ‡πÅ‡∏ö‡∏ö Spreadsheet V3): `views/edit-data-item-v3.ejs`
- Import/Export Instructions ‡πÅ‡∏ö‡∏ö Excel: `views/partials/modals/import-export-sheets-modal.ejs`, `public/js/import-export-manager.js`
- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ (Legacy): `views/admin-settings.ejs`, `public/js/admin-settings.js`, `public/js/instructions-management.js`
- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ (V2): `views/admin-settings-v2.ejs`, `public/js/admin-settings-v2.js`
- ‡πÅ‡∏ä‡∏ó: `views/admin-chat.ejs`, `public/js/chat-redesign.js`
- Follow-up Dashboard: `views/admin-followup.ejs`, `public/js/followup-dashboard.js`
- ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå: `views/admin-orders.ejs`, `public/js/admin-orders-v2.js`
- ‡∏ö‡∏£‡∏≠‡∏î‡πÅ‡∏Ñ‡∏™‡∏ï‡πå: `views/admin-broadcast.ejs`, `public/js/admin-broadcast.js`
- ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ API: `views/admin-api-usage.ejs`, `public/js/admin-api-usage.js`
- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà/‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: `views/admin-categories.ejs`, `views/admin-category-data.ejs`
- ‡πÇ‡∏û‡∏™‡∏ï‡πå FB/‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå: `views/admin-facebook-posts.ejs`, `public/js/admin-facebook-posts.js`
- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå FB: `views/admin-facebook-comment.ejs`
- Shared navbar: `views/partials/admin-navbar.ejs`

## ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç (‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï)

‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≠‡∏ö‡∏ô‡∏µ‡πâ (‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏±‡∏ö‡∏à‡∏£‡∏¥‡∏á):

- ‚úÖ ‡πÅ‡∏Å‡πâ XSS/unsafe HTML ‡πÉ‡∏ô toast/alert ‡πÅ‡∏•‡∏∞ rendering ‡∏´‡∏•‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤ (‡πÉ‡∏ä‡πâ `textContent`/DOM API ‡πÅ‡∏ó‡∏ô `innerHTML` ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å)
- ‚úÖ ‡πÅ‡∏Å‡πâ EJS ‡∏ù‡∏±‡∏á JSON ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ `<% - JSON.stringify(...) %>` ‡∏ã‡∏∂‡πà‡∏á‡∏ó‡∏≥‡πÉ‡∏´‡πâ JS syntax error + ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô `</script>` injection ‡∏î‡πâ‡∏ß‡∏¢ `.replace(/</g, '\\u003c')`
- ‚úÖ Dashboard V2: ‡πÅ‡∏Å‡πâ race condition loading, ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤, ‡∏õ‡∏£‡∏±‡∏ö label dropdown ‡∏´‡∏•‡∏±‡∏á save, ‡πÄ‡∏û‡∏¥‡πà‡∏° spinner ‡∏ï‡∏≠‡∏ô reorder/duplicate, ‡πÄ‡∏ï‡∏¥‡∏° `aria-label` ‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏° icon-only
- ‚úÖ Editors: V2 table editor ‡∏õ‡∏£‡∏±‡∏ö mobile/resize/flyout/undo-redo; V3 spreadsheet ‡πÄ‡∏û‡∏¥‡πà‡∏° retry, header parsing robust, Ctrl+S ‡πÅ‡∏ö‡∏ö addEventListener, export `.xlsx` ‡∏à‡∏£‡∏¥‡∏á‡∏ú‡πà‡∏≤‡∏ô backend
- ‚úÖ Fix crash ‡∏´‡∏ô‡πâ‡∏≤ API usage (`animateValue()` null element) ‡πÅ‡∏•‡∏∞ harden attribute escaping
- ‚úÖ Import/Export: render mapping/export ‡∏î‡πâ‡∏ß‡∏¢ DOM API + handle token ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ (reset + toast)
- ‚úÖ Chat redesign: ‡πÄ‡∏•‡∏¥‡∏Å‡πÉ‡∏ä‡πâ inline `onclick` ‡∏Å‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô string (userId/tag/image/order) ‚Üí ‡πÉ‡∏ä‡πâ event delegation + `data-*`
- ‚úÖ ‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ `FRONTEND_BUGS_REPORT.md` ‡πÑ‡∏°‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤ (‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Å‡∏π‡πâ‡πÑ‡∏ü‡∏•‡πå‡∏Å‡∏•‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡πÉ‡∏ô workspace)

## ‡∏™‡∏£‡∏∏‡∏õ‡∏õ‡∏£‡∏∞‡πÄ‡∏î‡πá‡∏ô‡πÄ‡∏£‡πà‡∏á‡∏î‡πà‡∏ß‡∏ô (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏Å‡πà‡∏≠‡∏ô)

### P0 ‚Äî Security / XSS (‡πÇ‡∏Ñ‡πâ‡∏î‡∏≠‡∏≤‡∏à‡∏ñ‡∏π‡∏Å‡∏â‡∏µ‡∏î‡∏ú‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô)

‡πÄ‡∏Ñ‡∏¢‡∏û‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏à‡∏∏‡∏î‡πÉ‡∏ä‡πâ `innerHTML` ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å (‡πÄ‡∏ä‡πà‡∏ô query string, error ‡∏à‡∏≤‡∏Å server) ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà escape ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î XSS ‡πÑ‡∏î‡πâ‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏Ñ‡∏ô‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå/‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ HTML/JS ‡∏°‡∏≤‡πÉ‡∏´‡πâ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏Å‡∏î

- `views/edit-data-item-v2.ejs:1768`‚Äì`1794` + ‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å URL ‡∏ó‡∏µ‡πà `views/edit-data-item-v2.ejs:1959`‚Äì`1967`
  - `showAlert()` ‡∏ó‡∏≥ `toast.innerHTML = ... <span>${message}</span> ...`
  - ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏≠‡∏≤ `?error=...` / `?success=...` ‡∏à‡∏≤‡∏Å URL ‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
- `public/js/admin-settings-v2.js:833`‚Äì`839` (`showToast()` ‡πÉ‡∏ä‡πâ `toast.innerHTML = message`)
- `public/js/admin-broadcast.js:31`‚Äì`53` (`showToast()` ‡πÉ‡∏™‡πà `${message}` ‡∏•‡∏á template string)
- `public/js/admin-facebook-posts.js:44`‚Äì`71` (`showToast()` ‡πÉ‡∏™‡πà `${message}` ‡∏•‡∏á template string)

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÇ‡∏î‡∏ô‡∏£‡∏±‡∏ô‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÉ‡∏ô session ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô (‡∏Ç‡πÇ‡∏°‡∏¢ token/cookie, ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏ó‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ, ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡πà‡∏≤ config ‡∏Ø‡∏•‡∏Ø)

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö: ‡πÉ‡∏ä‡πâ `textContent` ‡∏´‡∏£‡∏∑‡∏≠ escape HTML ‡∏Å‡πà‡∏≠‡∏ô render ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏Å URL/Server) ‡πÅ‡∏•‡∏∞‡∏´‡∏•‡∏µ‡∏Å‡πÄ‡∏•‡∏µ‡πà‡∏¢‡∏á `innerHTML` ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ `textContent`/DOM API ‡πÉ‡∏ô `views/edit-data-item-v2.ejs`, `public/js/admin-settings-v2.js`, `public/js/admin-broadcast.js`, `public/js/admin-facebook-posts.js` ‡πÅ‡∏•‡∏∞‡∏à‡∏∏‡∏î‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á ‡πÄ‡∏ä‡πà‡∏ô `views/edit-instruction.ejs`, `views/admin-facebook-comment.ejs`, `public/js/error-handler.js`)

### P1 ‚Äî Dashboard (Instructions) Race condition ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ Loading ‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô

`loadInstructionIntoEditor()` ‡πÉ‡∏ä‡πâ `editorRequestToken` ‡πÄ‡∏û‡∏∑‡πà‡∏≠ ignore response ‡πÄ‡∏Å‡πà‡∏≤ ‡πÅ‡∏ï‡πà stale request ‡∏¢‡∏±‡∏á‡∏õ‡∏¥‡∏î Loading ‡πÉ‡∏ô `finally` ‡∏ó‡∏≥‡πÉ‡∏´‡πâ spinner ‡∏´‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà request ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏¢‡∏±‡∏á pending ‡πÑ‡∏î‡πâ

- `public/js/admin-dashboard-v2.js:194`‚Äì`247`

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÇ‡∏´‡∏•‡∏î‡∏ú‡∏¥‡∏î/‡∏™‡∏±‡∏ö‡∏™‡∏ô‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡πÉ‡∏ô `finally` ‡πÉ‡∏´‡πâ‡∏õ‡∏¥‡∏î loading ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠ `requestId === editorRequestToken` (‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ counter ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö pending requests)

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (`public/js/admin-dashboard-v2.js` ‡∏õ‡∏¥‡∏î loading ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ request ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)

### P1 ‚Äî ‡∏´‡∏ô‡πâ‡∏≤ ‚Äú‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ API‚Äù ‡∏°‡∏µ‡∏ö‡∏±‡∏Ñ JS ‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πâ‡∏≤ crash

‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô `animateValue()` ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏£‡∏ß‡∏°‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ `element` ‡πÄ‡∏õ‡πá‡∏ô `null` ‡πÅ‡∏•‡πâ‡∏ß‡πÇ‡∏î‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `.textContent` ‡πÑ‡∏î‡πâ:

- `public/js/admin-api-usage.js:159`‚Äì`164`

```js
const element = document.getElementById(elementId);
if (!element || end === 0) {
  element.textContent = formatter(end); // element ‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡πá‡∏ô null
}
```

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** ‡∏ñ‡πâ‡∏≤ ID ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô/‡∏´‡∏≤‡∏¢ ‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡∏π‡∏Å render ‡πÅ‡∏ö‡∏ö‡∏°‡∏µ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç ‡∏à‡∏∞ error ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡πÅ‡∏¢‡∏Å‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç `!element` ‡∏≠‡∏≠‡∏Å (return ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ) ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢ handle `end === 0`

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (`public/js/admin-api-usage.js` ‡πÅ‡∏¢‡∏Å‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç `!element`)

## ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏£‡∏∞‡πÄ‡∏î‡πá‡∏ô‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤

### 1) Dashboard Instructions (admin-dashboard-v2)

**1.1 Dropdown label ‡πÄ‡∏™‡∏µ‡∏¢‡∏£‡∏π‡∏õ‡∏´‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡∏∑‡πà‡∏≠/‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢**

- `public/js/admin-dashboard-v2.js:323`‚Äì`327` ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô `option.textContent` ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏Ñ‡πà‡∏ä‡∏∑‡πà‡∏≠ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°‡πÉ‡∏ô option (‡πÄ‡∏ä‡πà‡∏ô `[instructionId]`, timestamp ‡∏ó‡∏µ‡πà server render ‡πÑ‡∏ß‡πâ) ‡∏´‡∏≤‡∏¢‡πÑ‡∏õ

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏¢‡∏Å instruction ‡∏¢‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô (‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ä‡∏∑‡πà‡∏≠‡∏ã‡πâ‡∏≥) ‡πÅ‡∏•‡∏∞ ‚Äú‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‚Äù ‡∏ó‡∏µ‡πà‡πÇ‡∏ä‡∏ß‡πå‡πÉ‡∏ô option ‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡∏™‡∏£‡πâ‡∏≤‡∏á label ‡πÄ‡∏î‡∏¥‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö (‡∏£‡∏ß‡∏° instructionId + updatedAt) ‡πÅ‡∏•‡∏∞ update `data-updated` ‡∏î‡πâ‡∏ß‡∏¢

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (`public/js/admin-dashboard-v2.js` ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï label + `data-updated` ‡∏´‡∏•‡∏±‡∏á save)

**1.2 Race condition ‡∏ï‡∏≠‡∏ô‡∏™‡∏•‡∏±‡∏ö Instruction (Loading state ‡∏™‡∏±‡∏ö‡∏™‡∏ô)**

- ‡∏î‡∏π‡∏™‡∏£‡∏∏‡∏õ P1 ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô (`public/js/admin-dashboard-v2.js:194`‚Äì`247`)

**1.3 Search Instructions**

- ‡πÄ‡∏î‡∏¥‡∏°‡∏°‡∏µ handler ‡πÉ‡∏ô `public/js/admin-dashboard-v2.js` ‡πÅ‡∏ï‡πà‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ input `#searchInstructions` ‚Üí ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏•‡πà‡∏´‡∏≤/‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÄ‡∏≠‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ instructions ‡πÄ‡∏¢‡∏≠‡∏∞

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡πÄ‡∏û‡∏¥‡πà‡∏° search input ‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡πÅ‡∏•‡∏∞‡∏ñ‡πâ‡∏≤‡∏à‡∏∞‡∏ó‡∏≥ filter ‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≤‡∏Å dropdown + search) ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ã‡πà‡∏≠‡∏ô/‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô (class ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ state ‡∏ï‡∏µ‡∏Å‡∏±‡∏ô‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡πÄ‡∏û‡∏¥‡πà‡∏° input ‡πÉ‡∏ô `views/admin-dashboard-v2.ejs` ‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏±‡∏ö `public/js/admin-dashboard-v2.js` ‡πÉ‡∏´‡πâ filter options ‡πÉ‡∏ô dropdown)

**1.4 UX: ‡πÉ‡∏ä‡πâ `prompt/confirm` ‡∏´‡∏•‡∏≤‡∏¢‡∏à‡∏∏‡∏î**

- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: duplicate ‡πÉ‡∏ä‡πâ `prompt()` (`public/js/admin-dashboard-v2.js:448`‚Äì`476`)

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** UX ‡πÑ‡∏°‡πà‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠, ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö validation/preview ‡∏î‡∏µ, ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏î‡∏µ

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡πÉ‡∏ä‡πâ Bootstrap modal ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏Å‡∏±‡∏ö toast/validation ‡πÅ‡∏ó‡∏ô prompt/confirm

**1.5 Data/UX: Duplicate Instruction ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏ä‡∏∑‡πà‡∏≠‡∏ã‡πâ‡∏≥**

- Frontend ‡∏Ç‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡∏î‡πâ‡∏ß‡∏¢ `prompt()` ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡πÑ‡∏õ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏ô‡∏≤‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (`public/js/admin-dashboard-v2.js:448`‚Äì`476`)
- Backend route duplicate ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏ã‡πâ‡∏≥ (`index.js:6689`‚Äì`6727`)

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** ‡∏ä‡∏∑‡πà‡∏≠‡∏ã‡πâ‡∏≥‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏±‡∏ô ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏™‡∏±‡∏ö‡∏™‡∏ô/‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏¥‡∏î‡∏á‡πà‡∏≤‡∏¢

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏ã‡πâ‡∏≥‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á (‡∏ù‡∏±‡πà‡∏á backend ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å) ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥ UX ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô/‡πÄ‡∏™‡∏ô‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (backend ‡∏Ñ‡∏∑‡∏ô `409` ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡∏ã‡πâ‡∏≥ + frontend ‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô/‡∏Ç‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô `public/js/admin-dashboard-v2.js`)

**1.6 UX: Reorder data items ‡πÑ‡∏°‡πà‡∏°‡∏µ loading indicator ‡∏ö‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î**

- ‡∏ï‡∏≠‡∏ô reorder ‡∏à‡∏∞ disable ‡∏õ‡∏∏‡πà‡∏° ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ ‚Äú‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‚Äù ‡∏ö‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î (`public/js/admin-dashboard-v2.js:655`‚Äì`686`)

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡πÄ‡∏û‡∏¥‡πà‡∏° spinner ‡πÉ‡∏ô‡∏õ‡∏∏‡πà‡∏° reorder ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô `public/js/admin-dashboard-v2.js`)

**1.7 Accessibility: ‡∏õ‡∏∏‡πà‡∏° icon-only ‡πÑ‡∏°‡πà‡∏°‡∏µ `aria-label`**

- ‡πÄ‡∏ä‡πà‡∏ô‡∏õ‡∏∏‡πà‡∏° edit/preview/duplicate/delete (`views/admin-dashboard-v2.ejs:214`‚Äì`231`)

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡πÄ‡∏ï‡∏¥‡∏° `aria-label` ‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏° icon-only ‡πÉ‡∏ô `views/admin-dashboard-v2.ejs`)

**1.8 UX: ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏°‡πà‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô**

- ‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á `toLocaleString()` ‡πÅ‡∏•‡∏∞ `toLocaleDateString()` (`views/admin-dashboard-v2.ejs:64`, `views/admin-dashboard-v2.ejs:265`, `views/admin-dashboard-v2.ejs:330`)

### 2) ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∏‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Text/Table) ‚Äî `edit-data-item-v2.ejs`

**2.1 P0 XSS ‡∏ú‡πà‡∏≤‡∏ô query string error/success**

- ‡∏î‡∏π‡∏™‡∏£‡∏∏‡∏õ P0 ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô (`views/edit-data-item-v2.ejs:1768`‚Äì`1794` + `1959`‚Äì`1967`)

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡πâ‡∏ß‡∏¢ `textContent`/DOM API ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ `innerHTML`)

**2.2 UX: ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏°‡∏µ editor 2 ‡πÅ‡∏ö‡∏ö + ‡∏°‡∏µ ‚Äú‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‚Äù**

- ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô dashboard ‡∏û‡∏≤‡πÑ‡∏õ‡∏Ñ‡∏ô‡∏•‡∏∞ editor (`/instructions-v2` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö text, `/instructions-v3` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö table) ‡πÅ‡∏ï‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡∏°‡∏µ dropdown `‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•` ‡∏ó‡∏µ‡πà‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏õ table ‡πÑ‡∏î‡πâ (`views/edit-data-item-v2.ejs:609`‚Äì`618`)

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏±‡∏ö‡∏™‡∏ô‡∏ß‡πà‡∏≤ ‚Äú‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡∏´‡∏ô‡πâ‡∏≤‡πÑ‡∏´‡∏ô‡∏î‡∏µ‚Äù ‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á V2/V3

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡∏ñ‡πâ‡∏≤‡∏ï‡∏±‡πâ‡∏á‡πÉ‡∏à‡πÉ‡∏´‡πâ V3 ‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö table: ‡∏ã‡πà‡∏≠‡∏ô/‡∏•‡πá‡∏≠‡∏Å type = text ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ ‡∏´‡∏£‡∏∑‡∏≠ redirect ‡πÑ‡∏õ V3 ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å table

**2.3 UX: ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô/Toast ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏∑‡πà‡∏ô**

- ‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏°‡∏µ toast ‡πÅ‡∏ö‡∏ö `notification-toast` ‡πÅ‡∏¢‡∏Å‡∏à‡∏≤‡∏Å `app-toast` ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡πÉ‡∏ä‡πâ

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** UI ‡πÑ‡∏°‡πà‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠ + ‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡∏£‡∏ß‡∏°‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ toast component ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ä‡πâ `app-toast` ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß)

**2.4 UX: ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö mobile ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡∏±‡πâ‡∏á `min-width` ‡∏™‡∏π‡∏á**

- `views/edit-data-item-v2.ejs:46`‚Äì`56` ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö `min-width: 780px` ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠/‡πÅ‡∏ó‡πá‡∏ö‡πÄ‡∏•‡πá‡∏ï‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô‡∏°‡∏≤‡∏Å

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡∏•‡∏î `min-width` ‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏•‡πá‡∏Å)

**2.5 UX: ‡∏à‡∏∏‡∏î‡∏à‡∏±‡∏ö‡∏•‡∏≤‡∏Å‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î (resize handles) ‡πÄ‡∏•‡πá‡∏Å ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ö‡∏ô‡∏à‡∏≠‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™**

- `.row-resizer` ‡∏™‡∏π‡∏á 8px (`views/edit-data-item-v2.ejs:239`‚Äì`264`)
- `.column-resizer` ‡∏Å‡∏ß‡πâ‡∏≤‡∏á 12px (`views/edit-data-item-v2.ejs:279`‚Äì`310`)

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡πÄ‡∏û‡∏¥‡πà‡∏° hitbox ‡πÉ‡∏´‡πâ‡∏•‡∏≤‡∏Å‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô)

**2.6 Bug/UX: ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á Cell flyout ‡∏≠‡∏≤‡∏à‡∏´‡∏•‡∏∏‡∏î‡∏à‡∏≠**

- `showCellFlyout()` ‡∏ï‡∏±‡πâ‡∏á `position: fixed` ‡πÅ‡∏ï‡πà‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏ö‡∏ö `rect + scrollTop/scrollLeft` ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ clamp ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á (`views/edit-data-item-v2.ejs:1842`‚Äì`1878`)

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** flyout ‡∏≠‡∏≤‡∏à‡πÄ‡∏î‡πâ‡∏á‡πÑ‡∏õ‡∏ú‡∏¥‡∏î‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á/‡∏´‡∏•‡∏∏‡∏î viewport ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏¢‡∏≤‡∏Å

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡πÅ‡∏Å‡πâ logic positioning + clamp ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô viewport)

**2.7 UX: Undo/Redo shortcuts ‡∏ú‡∏π‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÉ‡∏ô cell**

- keyboard handler ‡∏ñ‡∏π‡∏Å‡∏ú‡∏π‡∏Å‡∏ó‡∏µ‡πà textarea ‡∏Ç‡∏≠‡∏á cell (`views/edit-data-item-v2.ejs:1184`‚Äì`1257`) ‡∏ó‡∏≥‡πÉ‡∏´‡πâ Ctrl+Z/Y ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ focus ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà input ‡∏≠‡∏∑‡πà‡∏ô ‡πÜ

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡πÄ‡∏û‡∏¥‡πà‡∏° handler ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡πÉ‡∏ô input/textarea)

**2.8 Bug: ‡∏ù‡∏±‡∏á JSON ‡∏î‡πâ‡∏ß‡∏¢ `<% - JSON.stringify(...) %>` ‡∏ó‡∏≥‡πÉ‡∏´‡πâ JS syntax error**

- ‡πÉ‡∏ô `views/edit-data-item-v2.ejs` ‡πÄ‡∏Ñ‡∏¢‡∏°‡∏µ `<% - JSON.stringify(...) %>` ‡πÉ‡∏ô object `initialInstruction`

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡πÅ‡∏Å‡πâ‡πÄ‡∏õ‡πá‡∏ô `<%- ... %>` ‡πÅ‡∏•‡∏∞‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô `</script>` ‡∏î‡πâ‡∏ß‡∏¢ `.replace(/</g, '\\u003c')`)

### 3) ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏≤‡∏£‡∏≤‡∏á (Spreadsheet V3) ‚Äî `edit-data-item-v3.ejs`

**3.1 UX: Export ‚Äú.xlsx‚Äù ‡πÅ‡∏ï‡πà‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡πÄ‡∏õ‡πá‡∏ô TSV + ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•**

- `views/edit-data-item-v3.ejs:1312`‚Äì`1341` ‡∏™‡∏£‡πâ‡∏≤‡∏á TSV ‡πÅ‡∏•‡πâ‡∏ß‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏õ‡πá‡∏ô `.xlsx`

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ß‡πà‡∏≤‡πÑ‡∏î‡πâ‡πÑ‡∏ü‡∏•‡πå Excel ‡∏à‡∏£‡∏¥‡∏á ‡πÅ‡∏ï‡πà‡∏ö‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°/‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏≤‡∏à‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡πÇ‡∏î‡∏ô‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ß‡πà‡∏≤‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏ä‡∏ô‡∏¥‡∏î

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** 
- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô `.tsv` ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏ä‡∏ô‡∏¥‡∏î ‡∏´‡∏£‡∏∑‡∏≠
- ‡∏ó‡∏≥ export ‡∏ó‡∏µ‡πà backend ‡∏î‡πâ‡∏ß‡∏¢ `xlsx` ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏´‡πâ browser ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏£‡∏¥‡∏á

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å `.xlsx` ‡∏à‡∏£‡∏¥‡∏á‡∏ú‡πà‡∏≤‡∏ô backend route `POST /admin/instructions-v3/export-xlsx`)

**3.2 ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡∏£‡∏≤‡∏∞‡∏ö‡∏≤‡∏á‡∏Ç‡∏≠‡∏á header parsing**

- `fromJsData()` ‡πÉ‡∏ä‡πâ `sheet.getHeaders().split(',')` (`views/edit-data-item-v3.ejs:898`‚Äì`902`)
- `updateDimensions()` ‡πÉ‡∏ä‡πâ `sheet.getHeaders().split(',')` (`views/edit-data-item-v3.ejs:1131`‚Äì`1137`)
- `getCorrectHeaders()` fallback ‡πÉ‡∏ä‡πâ `split(',')` ‡πÅ‡∏•‡∏∞‡∏≠‡∏¥‡∏á DOM selector `.jexcel ...` (`views/edit-data-item-v3.ejs:1249`‚Äì`1267`)

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ comma (`,`) ‡∏à‡∏∞‡∏û‡∏±‡∏á/‡∏ô‡∏±‡∏ö‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ú‡∏¥‡∏î ‡πÅ‡∏•‡∏∞ DOM selector ‡∏≠‡∏≤‡∏à‡∏û‡∏±‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï library

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡πÄ‡∏Å‡πá‡∏ö headers ‡∏à‡∏≤‡∏Å config/API ‡∏Ç‡∏≠‡∏á jspreadsheet ‡πÅ‡∏ö‡∏ö‡πÄ‡∏õ‡πá‡∏ô array (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ) ‡∏´‡∏£‡∏∑‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å titles ‡∏à‡∏≤‡∏Å `sheet.options.columns`

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ `getCorrectHeaders()` ‡πÅ‡∏•‡∏∞ fallback ‡∏à‡∏≤‡∏Å `sheet.options.columns`)

**3.3 UX/Compatibility: ‡πÉ‡∏ä‡πâ `document.onkeydown`/`window.onbeforeunload` ‡πÅ‡∏ö‡∏ö override**

- `views/edit-data-item-v3.ejs:1351`‚Äì`1364`

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏±‡∏ö handler ‡∏≠‡∏∑‡πà‡∏ô (‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï) ‡πÅ‡∏•‡∏∞‡∏¢‡∏≤‡∏Å‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£ compose ‡∏Å‡∏±‡∏ö‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡πÉ‡∏ä‡πâ `addEventListener('keydown', ...)` ‡πÅ‡∏•‡∏∞ `addEventListener('beforeunload', ...)` ‡πÅ‡∏ó‡∏ô

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡∏¢‡πâ‡∏≤‡∏¢ Ctrl/Cmd+S ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ `addEventListener` ‡πÅ‡∏•‡∏∞‡πÄ‡∏ï‡∏¥‡∏° `e.returnValue` ‡πÉ‡∏ô `beforeunload`)

**3.4 Noise: ‡∏°‡∏µ `console.log` debug**

- ‡πÄ‡∏ä‡πà‡∏ô `views/edit-data-item-v3.ejs:837`‚Äì`838`

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** ‡∏£‡∏ö‡∏Å‡∏ß‡∏ô console, ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÄ‡∏ú‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ö‡∏≤‡∏á‡πÄ‡∏Ñ‡∏™

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡∏•‡∏ö/‡∏ã‡πà‡∏≠‡∏ô‡∏î‡πâ‡∏ß‡∏¢ flag debug

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡∏•‡∏ö `console.log` ‡πÉ‡∏ô V3 editor)

**3.5 UX: ‡∏ñ‡πâ‡∏≤ jspreadsheet ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏° Retry**

- ‡∏ñ‡πâ‡∏≤ `jspreadsheet` ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡πÇ‡∏´‡∏•‡∏î ‡∏à‡∏∞‡πÇ‡∏ä‡∏ß‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡∏∞ `return` ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (`views/edit-data-item-v3.ejs:908`‚Äì`913`) ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏° ‚Äú‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‚Äù

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏° retry (‡πÄ‡∏ä‡πà‡∏ô `location.reload()`) ‡∏´‡∏£‡∏∑‡∏≠ fallback ‡πÄ‡∏õ‡πá‡∏ô editor ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏° ‚Äú‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‚Äù ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î library ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à)

### 4) Import/Export Instructions (Excel)

**4.1 XSS/HTML break ‡∏à‡∏≤‡∏Å‡∏ä‡∏∑‡πà‡∏≠ sheet/‡∏ä‡∏∑‡πà‡∏≠ instruction**

- `public/js/import-export-manager.js:196`‚Äì`213` ‡πÄ‡∏≠‡∏≤ `sheetName`/`inst.name` ‡πÑ‡∏õ‡∏¢‡∏±‡∏î‡πÉ‡∏ô HTML ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà escape

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** ‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏°‡∏µ `"`, `<`, `&` ‡∏ó‡∏≥‡πÉ‡∏´‡πâ DOM ‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô ‡∏´‡∏£‡∏∑‡∏≠ XSS (‡πÅ‡∏°‡πâ‡∏à‡∏∞‡∏°‡∏≤‡∏à‡∏≤‡∏Å admin ‡πÅ‡∏ï‡πà‡∏Å‡πá‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡πà‡∏≠‡∏á‡πÇ‡∏´‡∏ß‡πà)

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** escape ‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏™‡πà‡πÉ‡∏ô attribute/text ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ DOM API (`document.createElement`) ‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô string HTML

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (`public/js/import-export-manager.js` ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏≤‡∏£ render ‡∏´‡∏•‡∏±‡∏Å‡πÑ‡∏õ‡πÉ‡∏ä‡πâ DOM API + `textContent`)

**4.2 UX: ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° alert ‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© + ‡πÉ‡∏ä‡πâ `alert()`**

- `public/js/import-export-manager.js:227`‚Äì`238`

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** ‡πÑ‡∏°‡πà‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠ ‡πÅ‡∏•‡∏∞‡∏Ç‡∏±‡∏î UX ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ + toast

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô toast ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏∑‡πà‡∏ô

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡πÉ‡∏ä‡πâ toast ‡πÅ‡∏ó‡∏ô `alert()` ‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)

**4.3 UX: Import token ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏**

- backend ‡∏à‡∏∞‡∏ï‡∏≠‡∏ö `400` ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô temp ‡∏ñ‡∏π‡∏Å‡∏•‡∏ö/‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ (‚Äú‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏´‡∏°‡πà‚Äù)

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (`public/js/import-export-manager.js` ‡∏ï‡∏£‡∏ß‡∏à error ‡πÅ‡∏•‡πâ‡∏ß reset flow ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ)

### 5) Settings (V2) + Toast

**5.1 P0 XSS ‡∏à‡∏≤‡∏Å toast**

- `public/js/admin-settings-v2.js:833`‚Äì`839` ‡πÉ‡∏ä‡πâ `toast.innerHTML = message`

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö/‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡∏î‡∏π‡∏™‡∏£‡∏∏‡∏õ P0

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (`public/js/admin-settings-v2.js` ‡πÉ‡∏ä‡πâ `textContent` ‡πÅ‡∏ó‡∏ô `innerHTML`)

### 6) Settings (Legacy) ‚Äî Instructions modal

**6.1 Modal backdrop cleanup ‡πÅ‡∏ö‡∏ö ‚Äú‡∏•‡πâ‡∏≤‡∏á‡∏´‡∏°‡∏î‚Äù ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏Å‡∏£‡∏∞‡∏ó‡∏ö modal ‡∏≠‡∏∑‡πà‡∏ô**

- `public/js/instructions-management.js:9`‚Äì`16` ‡∏•‡∏ö `.modal-backdrop` ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î + reset `body` ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà modal ‡∏õ‡∏¥‡∏î

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡∏°‡∏µ modal ‡∏ã‡πâ‡∏≠‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ modal ‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà ‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ backdrop ‡∏´‡∏≤‡∏¢/scroll ‡∏´‡∏•‡∏∏‡∏î

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï‡πÉ‡∏´‡πâ‡∏•‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞ backdrop ‡∏Ç‡∏≠‡∏á modal ‡∏ô‡∏±‡πâ‡∏ô ‡πÜ ‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏Å‡πâ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏ô‡πÄ‡∏´‡∏ï‡∏∏ (modal ‡∏ñ‡∏π‡∏Å‡∏õ‡∏¥‡∏î‡πÑ‡∏°‡πà clean ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏≠‡∏∞‡πÑ‡∏£)

### 7) Chat (chat-redesign)

**7.1 Inline `onclick` ‡∏Å‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô string (userId/tag/image/order) ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á injection**

- ‡πÄ‡∏Ñ‡∏¢‡∏û‡∏ö inline handler ‡πÄ‡∏ä‡πà‡∏ô `onclick='chatManager.selectUser(...)'`, `toggleTagFilter(...)`, `addTag/removeTag(...)`, `showImageModal(...)`
- ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡πà‡∏≤‡∏°‡∏µ `'` ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ attribute ‡πÅ‡∏ï‡∏Å ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á injection/XSS ‡πÑ‡∏î‡πâ

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡πÄ‡∏•‡∏¥‡∏Å‡πÉ‡∏ä‡πâ inline `onclick` ‡πÅ‡∏•‡πâ‡∏ß bind event ‡∏î‡πâ‡∏ß‡∏¢ `addEventListener` + ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡πÑ‡∏ß‡πâ‡πÉ‡∏ô `data-*` (‡πÉ‡∏ä‡πâ event delegation)

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (`public/js/chat-redesign.js` ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô delegation + `data-*` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö user list/tags/images/order actions)

**7.2 UX: Template ‡∏õ‡∏∏‡πà‡∏°‡∏°‡∏µ ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà implement**

- `public/js/chat-redesign.js:1515`‚Äì`1518` ‡πÅ‡∏™‡∏î‡∏á toast ‡∏ß‡πà‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏û‡∏£‡πâ‡∏≠‡∏° ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏™‡πà tooltip/label ‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏ß‡πà‡∏≤ ‚Äú‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤‚Äù

### 8) Orders (admin-orders-v2)

**8.1 ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏≤‡∏á field ‡πÑ‡∏°‡πà escape ‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡∏±‡∏î‡∏•‡∏á HTML**

- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: `order.phone` ‡∏ñ‡∏π‡∏Å‡πÉ‡∏™‡πà‡∏ï‡∏£‡∏á ‡πÜ (`public/js/admin-orders-v2.js:294`‚Äì`297`)

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** ‡∏ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡πÅ‡∏´‡∏•‡πà‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà clean (‡πÄ‡∏ä‡πà‡∏ô OCR/‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤) ‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô/‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á XSS

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** escape ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å field ‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤ HTML (‡∏£‡∏ß‡∏° attribute ‡πÅ‡∏•‡∏∞ textarea) ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ DOM API

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (escape/encode field ‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á ‡πÄ‡∏ä‡πà‡∏ô `order.phone` ‡πÉ‡∏ô `public/js/admin-orders-v2.js`)

### 9) Broadcast

**9.1 P0 XSS ‡∏à‡∏≤‡∏Å toast**

- ‡∏î‡∏π‡∏™‡∏£‡∏∏‡∏õ P0 (`public/js/admin-broadcast.js:31`‚Äì`53`)

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (`public/js/admin-broadcast.js` ‡πÉ‡∏ä‡πâ DOM + `textContent` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° toast)

**9.2 UX: ‡∏´‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à/‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å ‡πÑ‡∏°‡πà reset ‡∏ü‡∏≠‡∏£‡πå‡∏°/‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°**

- `public/js/admin-broadcast.js:303`‚Äì`310` ‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡πÑ‡∏ß‡πâ‡∏ß‡πà‡∏≤ optional ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡∏à‡∏£‡∏¥‡∏á

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏î‡∏™‡πà‡∏á‡∏≠‡∏µ‡∏Å‡∏£‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡∏á‡∏á‡∏ß‡πà‡∏≤ state ‡∏Ñ‡πâ‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå `messageItems` ‡πÅ‡∏•‡∏∞ rerender ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏õ‡∏∏‡πà‡∏° ‚Äú‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà‚Äù ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô

**9.3 P0/XSS: render ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô textarea ‡∏î‡πâ‡∏ß‡∏¢ `innerHTML`**

- ‡∏ñ‡πâ‡∏≤‡πÄ‡∏≠‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° user ‡∏°‡∏≤‡πÉ‡∏™‡πà‡πÉ‡∏ô `<textarea>...</textarea>` ‡∏ú‡πà‡∏≤‡∏ô `innerHTML` ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏à‡∏≠ payload ‡πÄ‡∏ä‡πà‡∏ô `</textarea><script>...` ‡∏à‡∏∞‡∏´‡∏•‡∏∏‡∏î‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å textarea ‡πÑ‡∏î‡πâ

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (`public/js/admin-broadcast.js` ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á `<textarea>` ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏ã‡πá‡∏ï `value`)

### 10) Categories / Category Data

**10.1 UX: ‡πÉ‡∏ä‡πâ `<a href=\"#\">` ‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏°‡πà `preventDefault()` ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏î‡πâ‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏ô**

- `views/admin-categories.ejs:239`‚Äì`242`

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡πÉ‡∏ä‡πâ `<button type="button">` ‡∏´‡∏£‡∏∑‡∏≠ `event.preventDefault()`

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (`views/admin-categories.ejs` ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡πâ‡∏á‡∏î‡πâ‡∏ß‡∏¢ `return false;`)

**10.2 Data ‡πÑ‡∏°‡πà escape ‡∏Ñ‡∏£‡∏ö**

- ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏°‡∏ß‡∏î/‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢/‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ñ‡∏π‡∏Å‡πÉ‡∏™‡πà‡∏•‡∏á HTML ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á (`views/admin-categories.ejs:246`‚Äì`253`)
- ‡∏Ñ‡πà‡∏≤‡πÄ‡∏ã‡∏•‡∏•‡πå‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á escape ‡πÅ‡∏Ñ‡πà `"` (`views/admin-category-data.ejs:192`‚Äì`200`)

**‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö:** ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏±‡∏Å‡∏Ç‡∏£‡∏∞‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏≠‡∏≤‡∏à‡∏ó‡∏≥‡πÉ‡∏´‡πâ HTML ‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô/‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á XSS

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (`views/admin-categories.ejs` escape HTML/JS string ‡πÅ‡∏•‡∏∞ `views/admin-category-data.ejs` render ‡∏î‡πâ‡∏ß‡∏¢ DOM API)

**10.3 UX: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô ‚Äúsilent update‚Äù ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å/‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î**

- `views/admin-category-data.ejs:234`‚Äì`250` ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏•‡πâ‡∏ß ‚Äú‡πÑ‡∏°‡πà‡πÅ‡∏à‡πâ‡∏á‡∏ú‡∏•‚Äù ‡πÅ‡∏•‡∏∞‡∏ñ‡πâ‡∏≤ error ‡∏Å‡πá‡πÅ‡∏Ñ‡πà‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå‡πÑ‡∏ß‡πâ

**‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞:** ‡πÄ‡∏û‡∏¥‡πà‡∏° indicator ‚Äú‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å/‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß/‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‚Äù ‡πÅ‡∏•‡∏∞ rollback ‡∏Ñ‡πà‡∏≤‡∏ñ‡πâ‡∏≤ save fail

**‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:** ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (`views/admin-category-data.ejs` ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ save/rollback + confirm ‡∏•‡∏ö‡πÅ‡∏ñ‡∏ß‡∏î‡πâ‡∏ß‡∏¢ SweetAlert)

## ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏≤‡∏Å `FRONTEND_BUGS_REPORT.md` ‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß (merge)

> ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏™‡∏£‡∏∏‡∏õ: ‚Äú‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏à‡∏≤‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‚Äù = ‡πÄ‡∏´‡πá‡∏ô‡∏à‡∏≤‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏ß‡πà‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡πÑ‡∏î‡πâ/‡πÄ‡∏Å‡∏¥‡∏î‡πÅ‡∏ô‡πà, ‚Äú‡∏ï‡πâ‡∏≠‡∏á QA ‡πÄ‡∏û‡∏¥‡πà‡∏°‚Äù = ‡∏ï‡πâ‡∏≠‡∏á‡∏•‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á, ‚Äú‡πÑ‡∏°‡πà‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‚Äù = ‡∏à‡∏≤‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏

### ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏à‡∏≤‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î (‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç)

- C-002: Race Condition ‡∏ï‡∏≠‡∏ô‡πÇ‡∏´‡∏•‡∏î Instruction ‚Üí ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß
- C-003: Export ‚Äú.xlsx‚Äù ‡πÅ‡∏ï‡πà‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏õ‡πá‡∏ô TSV ‚Üí ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å `.xlsx` ‡∏à‡∏£‡∏¥‡∏á)
- M-001: ‡∏ï‡∏≤‡∏£‡∏≤‡∏á V2 ‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ (min-width 780px) ‚Üí ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß
- M-002: Resize handle ‡πÄ‡∏•‡πá‡∏Å ‚Üí ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß
- M-003: Cell flyout ‡∏´‡∏•‡∏∏‡∏î‡∏à‡∏≠/‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô‡πÑ‡∏î‡πâ ‚Üí ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß
- M-005: Duplicate Instruction ‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏ä‡∏∑‡πà‡∏≠‡∏ã‡πâ‡∏≥ ‚Üí ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡∏°‡∏µ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ä‡∏∑‡πà‡∏≠‡∏ã‡πâ‡∏≥ backend + guard ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö)
- M-007: jspreadsheet fail ‡πÑ‡∏°‡πà‡∏°‡∏µ retry ‚Üí ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß
- m-004: Ctrl+Z/Y ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÉ‡∏ô cell ‚Üí ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß
- m-005: Reorder ‡πÑ‡∏°‡πà‡∏°‡∏µ loading indicator ‚Üí ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡∏°‡∏µ spinner ‡∏ï‡∏≠‡∏ô reorder)
- m-003: import token ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ ‚Üí ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (reset flow ‡πÄ‡∏°‡∏∑‡πà‡∏≠ token/‡πÑ‡∏ü‡∏•‡πå‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏)
- UX-005: Search & Filter ‚Üí ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡πÄ‡∏û‡∏¥‡πà‡∏° search input ‡πÅ‡∏•‡∏∞ filter dropdown options)
- m-010: ‡∏°‡∏µ `console.log` ‡πÉ‡∏ô V3 ‚Üí ‚úÖ ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß
- m-008: ‡∏õ‡∏∏‡πà‡∏° icon-only ‡∏Ç‡∏≤‡∏î `aria-label` ‚Üí üü° ‡πÅ‡∏Å‡πâ‡πÅ‡∏•‡πâ‡∏ß‡∏ö‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤ (‡πÄ‡∏ï‡∏¥‡∏°‡πÉ‡∏ô Dashboard V2 ‡πÅ‡∏•‡πâ‡∏ß; ‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏∑‡πà‡∏ô‡∏¢‡∏±‡∏á‡∏Ñ‡∏ß‡∏£‡πÑ‡∏•‡πà‡πÄ‡∏ï‡∏¥‡∏°‡∏ï‡πà‡∏≠)
- m-006: ‡πÉ‡∏ä‡πâ native `confirm/prompt/alert` ‡∏´‡∏•‡∏≤‡∏¢‡∏à‡∏∏‡∏î ‚Üí üü° ‡∏¢‡∏±‡∏á‡∏°‡∏µ‡∏ö‡∏≤‡∏á‡∏à‡∏∏‡∏î (‡∏¢‡∏±‡∏á‡πÉ‡∏ä‡πâ `prompt/confirm` ‡πÉ‡∏ô‡∏ö‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤)
- m-007: ‡∏ß‡∏±‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏°‡πà‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠ ‚Üí üü° ‡∏¢‡∏±‡∏á‡∏Ñ‡∏ß‡∏£ QA/‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß

### ‡∏ï‡πâ‡∏≠‡∏á QA ‡πÄ‡∏û‡∏¥‡πà‡∏° / ‡πÑ‡∏°‡πà‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏à‡∏≤‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î

- C-001: ‚Äú‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Instruction ‡πÅ‡∏•‡πâ‡∏ß state ‡πÑ‡∏°‡πà‡∏ã‡∏¥‡∏á‡∏Ñ‡πå‚Äù ‚Üí ‡∏à‡∏≤‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ dropdown ‡∏Å‡∏•‡∏±‡∏ö‡πÅ‡∏•‡∏∞ `return` ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ; ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô state ‡∏≠‡∏∑‡πà‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏≤‡∏° (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ QA ‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô browser)
- M-004: ‚ÄúPreview ‡πÑ‡∏°‡πà auto-refresh ‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠/‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‚Äù ‚Üí Preview fetch ‡∏à‡∏≤‡∏Å `/api/instructions-v2/:id/preview` ‡∏ï‡∏≠‡∏ô‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° ‡πÅ‡∏•‡∏∞ preview ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠/‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢; ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ ‚Äúauto-refresh ‡∏ï‡∏≠‡∏ô modal ‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‚Äù ‡∏ñ‡∏∑‡∏≠‡πÄ‡∏õ‡πá‡∏ô UX enhancement
- M-006: ‚Äúbeforeunload ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‚Äù ‚Üí ‡∏°‡∏µ `dirty` state ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏•‡∏∞‡πÑ‡∏î‡πâ harden ‡πÄ‡∏û‡∏¥‡πà‡∏° (`e.returnValue`); ‡∏¢‡∏±‡∏á‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ QA ‡∏ß‡πà‡∏≤ dirty ‡∏ñ‡∏π‡∏Å set ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏Å‡∏£‡∏ì‡∏µ
- m-001: ‚Äúescape HTML ‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô‚Äù ‚Üí ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏à‡∏≤‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏
- m-002: ‚Äútoast container ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á‚Äù ‚Üí ‡πÄ‡∏õ‡πá‡∏ô edge case; ‡πÑ‡∏î‡πâ‡∏õ‡∏£‡∏±‡∏ö `ensureToastContainer()` ‡πÉ‡∏´‡πâ robust ‡∏Ç‡∏∂‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß (‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤ element ‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô DOM)
- m-009: ‚ÄúCSS var fallback ‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‚Äù ‚Üí ‡∏´‡∏ô‡πâ‡∏≤ `edit-data-item-v3.ejs` ‡πÇ‡∏´‡∏•‡∏î `/css/style.css` ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡πÅ‡∏•‡πâ‡∏ß ‡∏à‡∏∂‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏∑‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏±‡∏Ñ
- (‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏) ‚Äú‡∏°‡∏µ search box ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‚Äù ‚Üí ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏° search input ‡πÅ‡∏•‡πâ‡∏ß (‡∏î‡∏π‡∏Ç‡πâ‡∏≠ 1.3)

## ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞‡πÄ‡∏ä‡∏¥‡∏á‡∏£‡∏∞‡∏ö‡∏ö (‡∏ó‡∏≥‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏∏‡πâ‡∏°)

1) ‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö Toast/Notification ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏≤‡∏ï‡∏£‡∏ê‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ `app-toast`) ‡πÅ‡∏•‡∏∞ ‚Äú‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ `innerHTML` ‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å‚Äù
2) ‡∏•‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ inline handler (`onclick="..."`) ‚Üí ‡πÉ‡∏ä‡πâ event delegation + `data-*`
3) ‡∏•‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ `alert/confirm/prompt` ‚Üí ‡πÉ‡∏ä‡πâ modal + validation ‡∏ó‡∏µ‡πà consistent
4) ‡∏ó‡∏≥ ‚Äúdirty state/unsaved warning‚Äù ‡πÉ‡∏´‡πâ‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å editor (text/table)
5) ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏∂‡πà‡∏á CDN: ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤ fallback ‡∏´‡∏£‡∏∑‡∏≠ serve local ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏ì‡∏µ‡πÄ‡∏ô‡πá‡∏ï‡∏ñ‡∏π‡∏Å‡∏ö‡∏•‡πá‡∏≠‡∏Å (‡πÄ‡∏ä‡πà‡∏ô‡πÉ‡∏ô‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£)
